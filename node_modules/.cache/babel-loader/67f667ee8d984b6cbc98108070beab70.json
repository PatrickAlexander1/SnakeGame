{"ast":null,"code":"var _jsxFileName = \"/Users/patrickwellins/Desktop/games/snake/src/App.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport EventListener, { withOptions } from 'react-event-listener';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Snake {\n  constructor(x, y, direction) {\n    this.x = x;\n    this.y = y;\n    this.direction = direction;\n    this.snakeBody = {\n      0: [this.x, this.y],\n      1: [this.x - 20, this.y],\n      2: [this.x - 40, this.y],\n      3: [this.x - 60, this.y]\n    };\n  }\n\n  changeDirection(direction) {\n    this.direction = direction;\n  }\n\n  updatePostion() {\n    if (this.hasBody() > 1) {\n      for (let i = this.hasBody() - 1; i >= 1; i--) {\n        this.snakeBody[i] = this.snakeBody[i - 1];\n      }\n    }\n\n    if (this.direction == 'up') {\n      this.y -= 20;\n    } else if (this.direction == 'down') {\n      this.y += 20;\n    } else if (this.direction == 'left') {\n      this.x -= 20;\n    } else if (this.direction == 'right') {\n      this.x += 20;\n    } else if (this.direction == 'pause') {//pass\n    }\n\n    this.snakeBody[0] = [this.x, this.y];\n  }\n\n  x() {\n    return this.x;\n  }\n\n  y() {\n    return this.y;\n  }\n\n  hasBody() {\n    return Object.keys(this.snakeBody).length;\n  }\n\n}\n\nconst snake = new Snake(100, 100, 'right');\n\nconst Position = ({\n  stateX,\n  stateY\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginLeft: \"100px\"\n    },\n    children: [\" \", stateX, \" \", stateY, \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n\n_c = Position;\n\nclass Apple {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  changeDirection(direction) {\n    this.direction = direction;\n  }\n\n  updatePostion() {\n    if (this.hasBody() > 1) {\n      for (let i = this.hasBody() - 1; i >= 1; i--) {\n        this.snakeBody[i] = this.snakeBody[i - 1];\n      }\n    }\n\n    if (this.direction == 'up') {\n      this.y -= 20;\n    } else if (this.direction == 'down') {\n      this.y += 20;\n    } else if (this.direction == 'left') {\n      this.x -= 20;\n    } else if (this.direction == 'right') {\n      this.x += 20;\n    } else if (this.direction == 'pause') {//pass\n    }\n\n    this.snakeBody[0] = [this.x, this.y];\n  }\n\n  x() {\n    return this.x;\n  }\n\n  y() {\n    return this.y;\n  }\n\n  hasBody() {\n    return Object.keys(this.snakeBody).length;\n  }\n\n}\n\nconst Game = /*#__PURE__*/React.memo(_c2 = _s(({\n  setStateX,\n  setStateY\n}) => {\n  _s();\n\n  let dx = 0;\n  let dy = 0;\n  let appleExists = false;\n  const squares = {};\n\n  for (let i = 0; i < 16; i++) {\n    squares[i * 20] = {};\n\n    for (let j = 0; j < 24; j++) {\n      squares[i * 20][j * 20] = false;\n    }\n  }\n\n  let cW;\n  let cH;\n  useEffect(() => {\n    const canvas = cRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    cW = canvas.width / 2;\n    cH = canvas.height / 2;\n    squares[cW][cH] = true; // let coords = genRandomXY()\n\n    setStateX(cW);\n    setStateY(cH);\n    setInterval(() => {\n      draw(ctx, canvas);\n      drawApple(ctx, canvas);\n      snake.updatePostion();\n    }, 150);\n    window.addEventListener('keydown', logKey, cW, cH);\n    return () => {\n      window.removeEventListener('keydown', logKey, cW, cH);\n    };\n  });\n\n  const logKey = event => {\n    if (event.code === \"ArrowRight\") {\n      snake.changeDirection(\"right\");\n    } else if (event.code === \"ArrowLeft\") {\n      snake.changeDirection(\"left\");\n    } else if (event.code === \"ArrowUp\") {\n      snake.changeDirection(\"up\");\n    } else if (event.code === \"ArrowDown\") {\n      snake.changeDirection(\"down\");\n    } else if (event.keyCode === 32) {\n      snake.changeDirection(\"pause\");\n    }\n  };\n\n  function draw(ctx, canvas) {\n    const squareSide = 20;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.beginPath();\n    ctx.rect(snake.x, snake.y, squareSide, squareSide);\n\n    if (snake.hasBody() > 0) {\n      for (let i = 0; i <= snake.hasBody() - 1; i++) {\n        ctx.rect(snake.snakeBody[i][0], snake.snakeBody[i][1], squareSide, squareSide);\n      }\n    }\n\n    ctx.fillStyle = \"#388E3C\";\n    ctx.fill();\n    ctx.closePath();\n  }\n\n  function drawApple(ctx, canvas, x, y) {\n    //   const genRandomXY = () => {\n    //   const y = Math.floor(Math.random() * 15)\n    //   const x = Math.floor(Math.random() * 23)\n    //   return [x * 20, y * 20]\n    // }\n    //\n    //   let randCoords = genRandomXY()\n    const appleRadius = 10;\n    ctx.beginPath();\n    ctx.arc(50, 50, appleRadius, 0, Math.PI * 2);\n    ctx.fillStyle = \"#D32F2F\";\n    ctx.fill();\n    ctx.closePath();\n  }\n\n  const cRef = useRef(null);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      style: {\n        background: \"#eee\",\n        display: \"block\",\n        margin: \"0 auto\"\n      },\n      id: \"myCanvas\",\n      width: \"480\",\n      height: \"320\",\n      ref: cRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 224,\n    columnNumber: 5\n  }, this);\n}, \"URm58pgjXa+ECeiVHN1N38QXQss=\"));\n_c3 = Game;\n\nfunction App() {\n  _s2();\n\n  const [stateX, setStateX] = useState(240);\n  const [stateY, setStateY] = useState(160);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Game, {\n      setStateX: setStateX,\n      setStateY: setStateY\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Position, {\n      stateX: stateX,\n      stateY: stateY\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 237,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(App, \"z/9Tpgp52heXM9WS/DEC/+/vP/U=\");\n\n_c4 = App;\nexport default App;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Position\");\n$RefreshReg$(_c2, \"Game$React.memo\");\n$RefreshReg$(_c3, \"Game\");\n$RefreshReg$(_c4, \"App\");","map":{"version":3,"sources":["/Users/patrickwellins/Desktop/games/snake/src/App.js"],"names":["React","useState","useEffect","useRef","EventListener","withOptions","Snake","constructor","x","y","direction","snakeBody","changeDirection","updatePostion","hasBody","i","Object","keys","length","snake","Position","stateX","stateY","marginLeft","Apple","Game","memo","setStateX","setStateY","dx","dy","appleExists","squares","j","cW","cH","canvas","cRef","current","ctx","getContext","width","height","setInterval","draw","drawApple","window","addEventListener","logKey","removeEventListener","event","code","keyCode","squareSide","clearRect","beginPath","rect","fillStyle","fill","closePath","appleRadius","arc","Math","PI","background","display","margin","App"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport EventListener, {withOptions} from 'react-event-listener';\n\nclass Snake {\n  constructor(x, y, direction) {\n    this.x = x\n    this.y = y\n    this.direction = direction\n    this.snakeBody = {0:[this.x , this.y], 1:[this.x - 20, this.y], 2:[this.x - 40, this.y], 3:[this.x - 60, this.y]}\n  }\n\n  changeDirection(direction){\n    this.direction = direction\n  }\n\n  updatePostion(){\n\n    if (this.hasBody() > 1){\n\n      for (let i = this.hasBody() - 1; i >= 1; i--){\n        this.snakeBody[i] = this.snakeBody[i - 1]\n      }\n  }\n    if (this.direction == 'up'){\n      this.y -= 20\n    }\n    else if (this.direction == 'down'){\n      this.y += 20\n    }\n    else if (this.direction == 'left'){\n      this.x -= 20\n    }\n    else if (this.direction == 'right'){\n      this.x += 20\n    }\n    else if (this.direction == 'pause'){\n      //pass\n    }\n    this.snakeBody[0] = [this.x, this.y]\n\n}\n\n  x(){\n    return this.x\n  }\n\n  y(){\n    return this.y\n  }\n\n  hasBody() {\n    return Object.keys(this.snakeBody).length\n  }\n\n\n}\n\nconst snake = new Snake(100, 100, 'right')\nconst Position = ({stateX, stateY}) => {\n\n  return(\n    <div style={{marginLeft: \"100px\"}}> {stateX} {stateY} </div>\n  )\n}\n\n\nclass Apple {\n\n  constructor(x, y) {\n    this.x = x\n    this.y = y\n  }\n\n  changeDirection(direction){\n    this.direction = direction\n  }\n\n  updatePostion(){\n\n    if (this.hasBody() > 1){\n\n      for (let i = this.hasBody() - 1; i >= 1; i--){\n        this.snakeBody[i] = this.snakeBody[i - 1]\n      }\n  }\n    if (this.direction == 'up'){\n      this.y -= 20\n    }\n    else if (this.direction == 'down'){\n      this.y += 20\n    }\n    else if (this.direction == 'left'){\n      this.x -= 20\n    }\n    else if (this.direction == 'right'){\n      this.x += 20\n    }\n    else if (this.direction == 'pause'){\n      //pass\n    }\n    this.snakeBody[0] = [this.x, this.y]\n\n}\n\n  x(){\n    return this.x\n  }\n\n  y(){\n    return this.y\n  }\n\n  hasBody() {\n    return Object.keys(this.snakeBody).length\n  }\n\n\n}\n\nconst Game = React.memo(({setStateX, setStateY}) => {\n\n  let dx = 0\n  let dy = 0\n\n  let appleExists = false\n\n  const squares = {}\n  for (let i = 0; i < 16; i++){\n    squares[i * 20] = {}\n    for (let j = 0; j < 24; j++){\n      squares[i * 20][j * 20] = false\n    }\n  }\n\n\n\n\n  let cW\n  let cH\n\n  useEffect(() => {\n\n\n      const canvas = cRef.current\n      const ctx = canvas.getContext(\"2d\");\n      cW = canvas.width/2\n      cH = canvas.height/2\n      squares[cW][cH] = true\n\n      // let coords = genRandomXY()\n\n      setStateX(cW)\n      setStateY(cH)\n      setInterval(() => {draw(ctx, canvas); drawApple(ctx, canvas); snake.updatePostion()}, 150)\n      window.addEventListener('keydown', logKey, cW, cH);\n      return () => {\n      window.removeEventListener('keydown', logKey, cW, cH);\n  }\n  })\n\n  const logKey = (event) => {\n\n    if (event.code === \"ArrowRight\"){\n      snake.changeDirection(\"right\")\n    }\n    else if (event.code === \"ArrowLeft\"){\n      snake.changeDirection(\"left\")\n    }\n    else if (event.code === \"ArrowUp\" ){\n      snake.changeDirection(\"up\")\n    }\n    else if (event.code === \"ArrowDown\"){\n      snake.changeDirection(\"down\")\n    }\n    else if (event.keyCode === 32){\n      snake.changeDirection(\"pause\")\n    }\n\n  }\n\n  function draw(ctx, canvas) {\n\n\n    const squareSide = 20\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.beginPath()\n    ctx.rect(snake.x, snake.y, squareSide, squareSide);\n    if (snake.hasBody() > 0){\n\n      for (let i = 0; i <= snake.hasBody() - 1; i++){\n        ctx.rect(snake.snakeBody[i][0], snake.snakeBody[i][1], squareSide, squareSide);\n      }\n    }\n    ctx.fillStyle = \"#388E3C\";\n    ctx.fill();\n    ctx.closePath();\n\n}\n\n  function drawApple(ctx, canvas, x, y) {\n\n    //   const genRandomXY = () => {\n    //   const y = Math.floor(Math.random() * 15)\n    //   const x = Math.floor(Math.random() * 23)\n    //   return [x * 20, y * 20]\n    // }\n    //\n    //   let randCoords = genRandomXY()\n      const appleRadius = 10\n      ctx.beginPath()\n      ctx.arc(50, 50, appleRadius, 0, Math.PI*2);\n      ctx.fillStyle = \"#D32F2F\";\n      ctx.fill();\n      ctx.closePath();\n\n\n    }\n\n\n\n\n  const cRef = useRef(null)\n  return(\n    <div>\n        <canvas  style={{ background: \"#eee\", display: \"block\", margin: \"0 auto\" }} id=\"myCanvas\" width=\"480\" height=\"320\" ref={cRef}></canvas>\n    </div>\n  )\n})\n\n\nfunction App() {\n\n  const [stateX, setStateX] = useState(240)\n  const [stateY, setStateY] = useState(160)\n\n  return (\n    <div>\n        <Game  setStateX={setStateX} setStateY={setStateY}/>\n        <Position stateX={stateX} stateY={stateY}/>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}