{"ast":null,"code":"var _jsxFileName = \"/Users/patrickwellins/Desktop/games/snake/src/App.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport EventListener, { withOptions } from 'react-event-listener';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Position = ({\n  stateX,\n  stateY\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginLeft: \"100px\"\n    },\n    children: [\" \", stateX, \" \", stateY, \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 9,\n    columnNumber: 5\n  }, this);\n};\n\n_c = Position;\nconst Game = /*#__PURE__*/React.memo(_c2 = _s(({\n  setStateX,\n  setStateY,\n  setRestart,\n  x,\n  setX\n}) => {\n  _s();\n\n  const [newGame, setNewGame] = useState(false);\n\n  const genRandomXY = snakeBody => {\n    const y = Math.floor(Math.random() * 15) * 20;\n    const x = Math.floor(Math.random() * 23) * 20;\n    let recurse = false;\n\n    for (let i = 0; i < snakeBody.length; i++) {\n      let temp_x = snakeBody[i][0];\n      let temp_y = snakeBody[i][1];\n\n      if (x === temp_x && y === temp_y) {\n        recurse = true;\n      }\n    }\n\n    if (recurse) {\n      return genRandomXY(snakeBody);\n    } else {\n      return [x, y];\n    }\n  };\n\n  class Snake {\n    constructor(x, y, direction) {\n      this.x = x;\n      this.y = y;\n      this.direction = direction;\n      this.snakeBody = {\n        0: [this.x, this.y],\n        1: [this.x - 20, this.y],\n        2: [this.x - 40, this.y],\n        3: [this.x - 60, this.y]\n      };\n      this.debugger = [];\n      this.pause = false;\n    }\n\n    changeDirection(direction) {\n      this.direction = direction;\n    }\n\n    getTail() {\n      return this.snakeBody[this.snakeLength() - 1];\n    }\n\n    go() {\n      this.pause = false;\n    }\n\n    updatePostion(appleX, appleY) {\n      if (!this.pause) {\n        let tail = this.getTail();\n\n        if (this.snakeLength() > 1) {\n          for (let i = this.snakeLength() - 1; i >= 1; i--) {\n            this.snakeBody[i] = this.snakeBody[i - 1];\n          }\n        }\n\n        if (this.direction == 'up') {\n          this.y -= 20;\n        } else if (this.direction == 'down') {\n          this.y += 20;\n        } else if (this.direction == 'left') {\n          this.x -= 20;\n        } else if (this.direction == 'right') {\n          this.x += 20;\n        }\n\n        this.snakeBody[0] = [this.x, this.y];\n\n        if (this.x === appleX && this.y === appleY) {\n          this.debugger.push(tail);\n        }\n      }\n    }\n\n    add() {\n      if (this.debugger.length == 1) {\n        this.snakeBody[this.snakeLength()] = this.debugger.pop();\n      }\n    }\n\n    snakeLength() {\n      return Object.keys(this.snakeBody).length;\n    }\n\n    collided() {\n      for (let i = 1; i < this.snakeLength(); i++) {\n        let temp_x = this.snakeBody[i][0];\n        let temp_y = this.snakeBody[i][1];\n\n        if (this.x === temp_x && this.y === temp_y) {\n          return true;\n        }\n      }\n\n      if (this.y > 300 || this.y < 0 || this.x < 0 || this.x > 460) {\n        return true;\n      }\n\n      return false;\n    }\n\n    p() {\n      this.pause = true;\n    }\n\n    getSnakeCoords() {\n      return Object.values(this.snakeBody);\n    }\n\n    resetSnake() {\n      this.snakeBody = {\n        0: [this.x, this.y],\n        1: [this.x - 20, this.y],\n        2: [this.x - 40, this.y],\n        3: [this.x - 60, this.y]\n      };\n    }\n\n  }\n\n  class Apple {\n    constructor() {\n      let randCoords = genRandomXY(snake.getSnakeCoords());\n      this.x = randCoords[0];\n      this.y = randCoords[1];\n    }\n\n    collision(snakeX, snakeY) {\n      if (snakeX === this.x && snakeY === this.y) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n    redraw(snakeX, snakeY) {\n      if (this.collision(snakeX, snakeY)) {\n        let randCoords = genRandomXY(snake.getSnakeCoords());\n        this.x = randCoords[0];\n        this.y = randCoords[1];\n      }\n    }\n\n    getX() {\n      return this.x;\n    }\n\n    getY() {\n      return this.y;\n    }\n\n  }\n\n  let cW;\n  let cH;\n  let snake = new Snake(100, 100, 'right');\n  let apple = new Apple();\n\n  const gameLogic = (ctx, canvas) => {\n    let c = snake.collided();\n\n    if (!c) {\n      drawSnake(ctx, canvas);\n      drawApple(ctx, canvas);\n      let x = apple.getX();\n      let y = apple.getY();\n      snake.updatePostion(x, y);\n      snake.add();\n      apple.redraw(snake.x, snake.y);\n      setStateX(snake.x);\n      setStateY(snake.y);\n    } else if (c) {\n      snake.p();\n      setRestart(true);\n    }\n  };\n\n  useEffect(() => {\n    const canvas = cRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    cW = canvas.width / 2;\n    cH = canvas.height / 2;\n    let int = setInterval(() => {\n      gameLogic(ctx, canvas);\n    }, 150);\n\n    if (x) {\n      setX(false);\n      snake.x = 100;\n      snake.y = 100;\n      snake.snakeBody = {\n        0: [100, 100],\n        1: [80, 100],\n        2: [60, 100],\n        3: [40, 100]\n      };\n      clearInterval(int);\n    }\n\n    window.addEventListener('keydown', logKey, cW, cH);\n    return () => {\n      window.removeEventListener('keydown', logKey, cW, cH);\n    };\n  }, [x]);\n\n  const logKey = event => {\n    if (event.code === \"ArrowRight\") {\n      snake.changeDirection(\"right\");\n    } else if (event.code === \"ArrowLeft\") {\n      snake.changeDirection(\"left\");\n    } else if (event.code === \"ArrowUp\") {\n      snake.changeDirection(\"up\");\n    } else if (event.code === \"ArrowDown\") {\n      snake.changeDirection(\"down\");\n    } else if (event.keyCode === 32) {\n      snake.p();\n    } else if (event.keyCode === 13) {\n      snake.go();\n    }\n  };\n\n  function drawSnake(ctx, canvas) {\n    const squareSide = 20;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.beginPath();\n    ctx.rect(snake.x, snake.y, squareSide, squareSide);\n\n    if (snake.snakeLength() > 0) {\n      for (let i = 0; i <= snake.snakeLength() - 1; i++) {\n        ctx.rect(snake.snakeBody[i][0], snake.snakeBody[i][1], squareSide, squareSide);\n      }\n    }\n\n    ctx.fillStyle = \"#388E3C\";\n    ctx.fill();\n    ctx.closePath();\n  }\n\n  function drawApple(ctx, canvas, x, y) {\n    const appleRadius = 10;\n    ctx.beginPath();\n    ctx.arc(apple.getX() + appleRadius, apple.getY() + appleRadius, appleRadius, 0, Math.PI * 2);\n    ctx.fillStyle = \"#D32F2F\";\n    ctx.fill();\n    ctx.closePath();\n  }\n\n  const cRef = useRef(null);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        fontFamily: \"'Press Start 2P', cursive\",\n        textAlign: \"center\"\n      },\n      children: \" Snake\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      style: {\n        background: \"#262626\",\n        display: \"block\",\n        margin: \"0 auto\"\n      },\n      id: \"myCanvas\",\n      width: \"480\",\n      height: \"320\",\n      ref: cRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 294,\n    columnNumber: 5\n  }, this);\n}, \"unpCDqkRiv8IF6lifD1Uy6dNVEA=\"));\n_c3 = Game;\n\nfunction App() {\n  _s2();\n\n  const [stateX, setStateX] = useState(240);\n  const [stateY, setStateY] = useState(160);\n  const [restart, setRestart] = useState(false);\n  const [x, setX] = useState(false);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Game, {\n      setX: setX,\n      x: x,\n      setRestart: setRestart,\n      setStateX: setStateX,\n      setStateY: setStateY\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Position, {\n      stateX: stateX,\n      stateY: stateY\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 9\n    }, this), restart && /*#__PURE__*/_jsxDEV(\"h4\", {\n      onClick: () => {\n        setRestart(false);\n        setX(true);\n      },\n      style: {\n        fontFamily: \"'Press Start 2P', cursive\",\n        textAlign: \"center\"\n      },\n      children: \" New Game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 23\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 311,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(App, \"hEgfNN5jhit8guQgXAc7ANvMoYM=\");\n\n_c4 = App;\nexport default App;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Position\");\n$RefreshReg$(_c2, \"Game$React.memo\");\n$RefreshReg$(_c3, \"Game\");\n$RefreshReg$(_c4, \"App\");","map":{"version":3,"sources":["/Users/patrickwellins/Desktop/games/snake/src/App.js"],"names":["React","useState","useEffect","useRef","EventListener","withOptions","Position","stateX","stateY","marginLeft","Game","memo","setStateX","setStateY","setRestart","x","setX","newGame","setNewGame","genRandomXY","snakeBody","y","Math","floor","random","recurse","i","length","temp_x","temp_y","Snake","constructor","direction","debugger","pause","changeDirection","getTail","snakeLength","go","updatePostion","appleX","appleY","tail","push","add","pop","Object","keys","collided","p","getSnakeCoords","values","resetSnake","Apple","randCoords","snake","collision","snakeX","snakeY","redraw","getX","getY","cW","cH","apple","gameLogic","ctx","canvas","c","drawSnake","drawApple","cRef","current","getContext","width","height","int","setInterval","clearInterval","window","addEventListener","logKey","removeEventListener","event","code","keyCode","squareSide","clearRect","beginPath","rect","fillStyle","fill","closePath","appleRadius","arc","PI","fontFamily","textAlign","background","display","margin","App","restart"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport EventListener, {withOptions} from 'react-event-listener';\n\n\n\nconst Position = ({stateX, stateY}) => {\n\n  return(\n    <div style={{marginLeft: \"100px\"}}> {stateX} {stateY} </div>\n  )\n}\n\n\n\n\nconst Game = React.memo(({setStateX, setStateY, setRestart, x, setX}) => {\n\n\n  const [newGame, setNewGame] = useState(false)\n\n  const genRandomXY = (snakeBody) => {\n\n      const y = Math.floor(Math.random() * 15) * 20\n      const x = Math.floor(Math.random() * 23) * 20\n      let recurse = false\n      for (let i = 0; i < snakeBody.length; i++){\n        let temp_x = snakeBody[i][0]\n        let temp_y = snakeBody[i][1]\n        if (x === temp_x && y === temp_y){\n          recurse = true\n        }\n      }\n      if (recurse){\n        return genRandomXY(snakeBody)\n      }\n      else{\n        return [x, y]\n      }\n  }\n\n  class Snake {\n\n    constructor(x, y, direction) {\n      this.x = x\n      this.y = y\n      this.direction = direction\n      this.snakeBody = {0:[this.x , this.y], 1:[this.x - 20, this.y], 2:[this.x - 40, this.y], 3:[this.x - 60, this.y]}\n      this.debugger = []\n      this.pause = false\n    }\n\n    changeDirection(direction){\n      this.direction = direction\n    }\n\n    getTail(){\n      return this.snakeBody[this.snakeLength() - 1]\n    }\n\n    go() {\n      this.pause = false\n    }\n\n    updatePostion(appleX, appleY){\n\n      if (!this.pause){\n        let tail = this.getTail()\n        if (this.snakeLength() > 1){\n\n        for (let i = this.snakeLength() - 1; i >= 1; i--){\n          this.snakeBody[i] = this.snakeBody[i - 1]\n        }\n    }\n\n\n      if (this.direction == 'up'){\n        this.y -= 20\n      }\n      else if (this.direction == 'down'){\n        this.y += 20\n      }\n      else if (this.direction == 'left'){\n        this.x -= 20\n      }\n      else if (this.direction == 'right'){\n        this.x += 20\n      }\n\n      this.snakeBody[0] = [this.x, this.y]\n\n      if (this.x === appleX && this.y === appleY){\n        this.debugger.push(tail)\n      }}\n    }\n\n    add(){\n      if (this.debugger.length == 1){\n        this.snakeBody[this.snakeLength()] = this.debugger.pop()\n      }\n    }\n\n\n    snakeLength() {\n      return Object.keys(this.snakeBody).length\n    }\n\n    collided() {\n\n        for (let i = 1; i < this.snakeLength(); i++){\n            let temp_x = this.snakeBody[i][0]\n            let temp_y = this.snakeBody[i][1]\n            if (this.x === temp_x && this.y === temp_y){\n              return true\n            }\n        }\n        if (this.y > 300 || this.y < 0 || this.x < 0 || this.x > 460){\n          return true\n        }\n        return false\n    }\n\n    p(){\n      this.pause = true\n    }\n\n    getSnakeCoords(){\n      return Object.values(this.snakeBody)\n    }\n\n    resetSnake() {\n        this.snakeBody = {0:[this.x , this.y], 1:[this.x - 20, this.y], 2:[this.x - 40, this.y], 3:[this.x - 60, this.y]}\n    }\n\n\n  }\n\n  class Apple {\n\n    constructor() {\n      let randCoords = genRandomXY(snake.getSnakeCoords())\n      this.x = randCoords[0]\n      this.y = randCoords[1]\n    }\n\n    collision(snakeX, snakeY) {\n      if (snakeX === this.x && snakeY === this.y){\n        return true\n      }\n      else{\n        return false\n      }\n    }\n\n    redraw(snakeX, snakeY){\n      if (this.collision(snakeX, snakeY)){\n        let randCoords = genRandomXY(snake.getSnakeCoords())\n        this.x = randCoords[0]\n        this.y = randCoords[1]\n      }\n    }\n\n    getX(){\n      return this.x\n    }\n\n    getY(){\n      return this.y\n    }\n\n  }\n\n\n\n  let cW\n  let cH\n  let snake = new Snake(100, 100, 'right')\n  let apple = new Apple()\n\n  const gameLogic = (ctx, canvas) => {\n\n    let c = snake.collided()\n\n    if (!c){\n      drawSnake(ctx, canvas)\n      drawApple(ctx, canvas)\n      let x = apple.getX()\n      let y = apple.getY()\n      snake.updatePostion(x, y)\n      snake.add()\n      apple.redraw(snake.x, snake.y)\n      setStateX(snake.x)\n      setStateY(snake.y)\n\n    }\n    else if (c){\n        snake.p()\n        setRestart(true)\n\n    }\n\n\n\n\n  }\n\n  useEffect(() => {\n\n\n      const canvas = cRef.current\n      const ctx = canvas.getContext(\"2d\");\n      cW = canvas.width/2\n      cH = canvas.height/2\n\n\n      let int = setInterval(() => {gameLogic(ctx, canvas)}, 150)\n\n      if (x){\n        setX(false)\n        snake.x = 100\n        snake.y = 100\n        snake.snakeBody = {0:[100 , 100], 1:[80, 100], 2:[60, 100], 3:[40, 100]}\n        clearInterval(int)\n      }\n      window.addEventListener('keydown', logKey, cW, cH);\n      return () => {\n      window.removeEventListener('keydown', logKey, cW, cH);\n  }\n},[x])\n\n  const logKey = (event) => {\n\n    if (event.code === \"ArrowRight\"){\n      snake.changeDirection(\"right\")\n    }\n    else if (event.code === \"ArrowLeft\"){\n      snake.changeDirection(\"left\")\n    }\n    else if (event.code === \"ArrowUp\" ){\n      snake.changeDirection(\"up\")\n    }\n    else if (event.code === \"ArrowDown\"){\n      snake.changeDirection(\"down\")\n    }\n    else if (event.keyCode === 32){\n      snake.p()\n    }\n    else if (event.keyCode === 13){\n      snake.go()\n    }\n\n  }\n\n  function drawSnake(ctx, canvas) {\n\n\n    const squareSide = 20\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.beginPath()\n    ctx.rect(snake.x, snake.y, squareSide, squareSide);\n    if (snake.snakeLength() > 0){\n\n      for (let i = 0; i <= snake.snakeLength() - 1; i++){\n\n          ctx.rect(snake.snakeBody[i][0], snake.snakeBody[i][1], squareSide, squareSide);\n\n\n      }\n    }\n    ctx.fillStyle = \"#388E3C\";\n    ctx.fill();\n    ctx.closePath();\n\n}\n\n  function drawApple(ctx, canvas, x, y) {\n\n\n      const appleRadius = 10\n      ctx.beginPath()\n      ctx.arc(apple.getX() + appleRadius, apple.getY() + appleRadius, appleRadius, 0, Math.PI*2);\n      ctx.fillStyle = \"#D32F2F\";\n      ctx.fill();\n      ctx.closePath();\n\n\n    }\n\n\n\n\n  const cRef = useRef(null)\n\n  return(\n    <div>\n        <h1 style ={{fontFamily: \"'Press Start 2P', cursive\", textAlign: \"center\"}}> Snake</h1>\n        <canvas  style={{ background: \"#262626\", display: \"block\", margin: \"0 auto\" }} id=\"myCanvas\" width=\"480\" height=\"320\" ref={cRef}></canvas>\n    </div>\n  )\n})\n\n\nfunction App() {\n\n  const [stateX, setStateX] = useState(240)\n  const [stateY, setStateY] = useState(160)\n  const [restart, setRestart] = useState(false)\n  const [x, setX] = useState(false)\n\n\n  return (\n    <div>\n        <Game setX ={setX} x={x} setRestart ={setRestart} setStateX={setStateX} setStateY={setStateY}/>\n        <Position stateX={stateX} stateY={stateY}/>\n        {restart &&   <h4 onClick={() => {setRestart(false); setX(true)}} style ={{fontFamily: \"'Press Start 2P', cursive\", textAlign: \"center\"}}> New Game</h4>}\n\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}