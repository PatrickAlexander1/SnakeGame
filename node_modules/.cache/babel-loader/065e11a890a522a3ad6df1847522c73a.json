{"ast":null,"code":"var _jsxFileName = \"/Users/patrickwellins/Documents/games/snake/src/App.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst appleRadius = 10;\n\nclass Snake {\n  constructor(x, y, direction) {\n    this.x = x;\n    this.y = y;\n    this.direction = direction;\n    this.snakeBody = {\n      0: [this.x, this.y],\n      1: [this.x - 20, this.y],\n      2: [this.x - 40, this.y],\n      3: [this.x - 60, this.y]\n    };\n    this.debugger = [];\n    this.pause = false;\n  }\n\n  changeDirection(direction) {\n    this.direction = direction;\n  }\n\n  getTail() {\n    return this.snakeBody[this.snakeLength() - 1];\n  }\n\n  go() {\n    this.pause = false;\n  }\n\n  updatePostion(appleX, appleY) {\n    if (!this.pause) {\n      const tail = this.getTail();\n\n      if (this.snakeLength() > 1) {\n        for (let i = this.snakeLength() - 1; i >= 1; i--) {\n          this.snakeBody[i] = this.snakeBody[i - 1];\n        }\n      }\n\n      if (this.direction === 'up') {\n        this.y -= 20;\n      } else if (this.direction === 'down') {\n        this.y += 20;\n      } else if (this.direction === 'left') {\n        this.x -= 20;\n      } else if (this.direction === 'right') {\n        this.x += 20;\n      }\n\n      this.snakeBody[0] = [this.x, this.y];\n\n      if (this.x === appleX && this.y === appleY) {\n        this.debugger.push(tail);\n      }\n    }\n  }\n\n  add() {\n    if (this.debugger.length === 1) {\n      this.snakeBody[this.snakeLength()] = this.debugger.pop();\n    }\n  }\n\n  snakeLength() {\n    return Object.keys(this.snakeBody).length;\n  }\n\n  collided() {\n    for (let i = 1; i < this.snakeLength(); i++) {\n      const temp_x = this.snakeBody[i][0];\n      const temp_y = this.snakeBody[i][1];\n\n      if (this.x === temp_x && this.y === temp_y) {\n        return true;\n      }\n    }\n\n    if (this.y > 300 || this.y < 0 || this.x < 0 || this.x > 460) {\n      return true;\n    }\n\n    return false;\n  }\n\n  pauseSnake() {\n    this.pause = true;\n  }\n\n  getSnakeCoords() {\n    return Object.values(this.snakeBody);\n  }\n\n  resetSnake() {\n    this.x = 100;\n    this.y = 100;\n    this.snakeBody = {\n      0: [this.x, this.y],\n      1: [this.x - 20, this.y],\n      2: [this.x - 40, this.y],\n      3: [this.x - 60, this.y]\n    };\n  }\n\n}\n\nclass Apple {\n  constructor(snake) {\n    const randCoords = genRandomXY(snake.getSnakeCoords());\n    this.x = randCoords[0];\n    this.y = randCoords[1];\n  }\n\n  collision(snakeX, snakeY, setScore, localScore) {\n    if (snakeX === this.x && snakeY === this.y) {\n      localScore += 1;\n      setScore(localScore);\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  redraw(snakeX, snakeY, setScore, localScore, snake) {\n    if (this.collision(snakeX, snakeY, setScore, localScore)) {\n      const randCoords = genRandomXY(snake.getSnakeCoords());\n      this.x = randCoords[0];\n      this.y = randCoords[1];\n    }\n  }\n\n  getX() {\n    return this.x;\n  }\n\n  getY() {\n    return this.y;\n  }\n\n}\n\nconst genRandomXY = snakeBody => {\n  const y = Math.floor(Math.random() * 15) * 20;\n  const x = Math.floor(Math.random() * 23) * 20;\n  let recurse = false;\n  snakeBody.every(element => {\n    console.log(element);\n    const temp_x = element[0];\n    const temp_y = element[1];\n\n    if (x === temp_x && y === temp_y) {\n      recurse = true;\n      return false;\n    }\n  });\n  return recurse ? genRandomXY(snakeBody) : [x, y];\n};\n\nconst Game = /*#__PURE__*/React.memo(_c = _s(({\n  setRestart,\n  x,\n  setX,\n  setScore\n}) => {\n  _s();\n\n  let localScore = 0;\n  const snake = new Snake(100, 100, 'right');\n  const apple = new Apple(snake);\n  const canvasRef = useRef(null);\n\n  const controller = event => {\n    if (event.code === \"ArrowRight\") {\n      snake.changeDirection(\"right\");\n    } else if (event.code === \"ArrowLeft\") {\n      snake.changeDirection(\"left\");\n    } else if (event.code === \"ArrowUp\") {\n      snake.changeDirection(\"up\");\n    } else if (event.code === \"ArrowDown\") {\n      snake.changeDirection(\"down\");\n    } else if (event.keyCode === 32) {\n      snake.pauseSnake();\n    } else if (event.keyCode === 13) {\n      snake.go();\n    }\n  };\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const canvasWidth = canvas.width / 2;\n    const canvasHeight = canvas.height / 2;\n\n    const gameLogic = (ctx, canvas) => {\n      const snakeCollided = snake.collided();\n\n      if (!snakeCollided) {\n        drawSnake(ctx, canvas);\n        drawApple(ctx, canvas);\n        snake.updatePostion(apple.getX(), apple.getY());\n        snake.add();\n        apple.redraw(snake.x, snake.y, setScore, localScore, snake);\n        setStateX(snake.x);\n        setStateY(snake.y);\n      } else if (snakeCollided) {\n        setRestart(true);\n      }\n    };\n\n    let gameState = setInterval(() => {\n      gameLogic(ctx, canvas);\n    }, 150);\n\n    if (x) {\n      snake.resetSnake();\n      setX(false);\n      localScore = 0;\n      setScore(localScore);\n    }\n\n    window.addEventListener('keydown', controller, canvasWidth, canvasHeight);\n    return () => {\n      clearInterval(gameState);\n      window.removeEventListener('keydown', controller, canvasWidth, canvasHeight);\n    };\n  }, [x]);\n\n  function drawSnake(ctx, canvas) {\n    const squareSide = 20;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.beginPath();\n    ctx.rect(snake.x, snake.y, squareSide, squareSide);\n\n    if (snake.snakeLength() > 0) {\n      for (let i = 0; i <= snake.snakeLength() - 1; i++) {\n        ctx.rect(snake.snakeBody[i][0], snake.snakeBody[i][1], squareSide, squareSide);\n      }\n    }\n\n    ctx.fillStyle = \"#388E3C\";\n    ctx.fill();\n    ctx.closePath();\n  }\n\n  function drawApple(ctx, canvas, x, y) {\n    ctx.beginPath();\n    ctx.arc(apple.getX() + appleRadius, apple.getY() + appleRadius, appleRadius, 0, Math.PI * 2);\n    ctx.fillStyle = \"#D32F2F\";\n    ctx.fill();\n    ctx.closePath();\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        fontFamily: \"'Press Start 2P', cursive\",\n        textAlign: \"center\"\n      },\n      children: \" Snake\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      style: {\n        background: \"#262626\",\n        display: \"block\",\n        margin: \"0 auto\"\n      },\n      id: \"myCanvas\",\n      width: \"480\",\n      height: \"320\",\n      ref: canvasRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 261,\n    columnNumber: 5\n  }, this);\n}, \"UJgi7ynoup7eqypjnwyX/s32POg=\"));\n_c2 = Game;\n\nfunction App() {\n  _s2();\n\n  const [restart, setRestart] = useState(false);\n  const [x, setX] = useState(false);\n  const [score, updateScore] = useState(0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Game, {\n      setScore: updateScore,\n      setX: setX,\n      x: x,\n      setRestart: setRestart\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 9\n    }, this), restart && /*#__PURE__*/_jsxDEV(\"h4\", {\n      onClick: () => {\n        setRestart(false);\n        setX(true);\n      },\n      style: {\n        fontFamily: \"'Press Start 2P', cursive\",\n        textAlign: \"center\",\n        cursor: \"grab\"\n      },\n      children: \" New Game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      style: {\n        fontFamily: \"'Press Start 2P', cursive\",\n        textAlign: \"center\",\n        cursor: \"grab\"\n      },\n      children: [\"Score: \", score]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 276,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(App, \"KVRiBQNfkv5pgMqw3QNmDLr6HI0=\");\n\n_c3 = App;\nexport default App;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Game$React.memo\");\n$RefreshReg$(_c2, \"Game\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"sources":["/Users/patrickwellins/Documents/games/snake/src/App.js"],"names":["React","useState","useEffect","useRef","appleRadius","Snake","constructor","x","y","direction","snakeBody","debugger","pause","changeDirection","getTail","snakeLength","go","updatePostion","appleX","appleY","tail","i","push","add","length","pop","Object","keys","collided","temp_x","temp_y","pauseSnake","getSnakeCoords","values","resetSnake","Apple","snake","randCoords","genRandomXY","collision","snakeX","snakeY","setScore","localScore","redraw","getX","getY","Math","floor","random","recurse","every","element","console","log","Game","memo","setRestart","setX","apple","canvasRef","controller","event","code","keyCode","canvas","current","ctx","getContext","canvasWidth","width","canvasHeight","height","gameLogic","snakeCollided","drawSnake","drawApple","setStateX","setStateY","gameState","setInterval","window","addEventListener","clearInterval","removeEventListener","squareSide","clearRect","beginPath","rect","fillStyle","fill","closePath","arc","PI","fontFamily","textAlign","background","display","margin","App","restart","score","updateScore","cursor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\nconst appleRadius = 10\n\nclass Snake {\n\n  constructor(x, y, direction) {\n    this.x = x\n    this.y = y\n    this.direction = direction\n    this.snakeBody = {0:[this.x , this.y], 1:[this.x - 20, this.y], 2:[this.x - 40, this.y], 3:[this.x - 60, this.y]}\n    this.debugger = []\n    this.pause = false\n  }\n\n  changeDirection(direction){\n    this.direction = direction\n  }\n\n  getTail(){\n    return this.snakeBody[this.snakeLength() - 1]\n  }\n\n  go() {\n    this.pause = false\n  }\n\n  updatePostion(appleX, appleY){\n\n    if (!this.pause){\n      const tail = this.getTail()\n      if (this.snakeLength() > 1){\n\n      for (let i = this.snakeLength() - 1; i >= 1; i--){\n        this.snakeBody[i] = this.snakeBody[i - 1]\n      }\n  }\n\n    if (this.direction === 'up'){\n      this.y -= 20\n    }\n    else if (this.direction === 'down'){\n      this.y += 20\n    }\n    else if (this.direction === 'left'){\n      this.x -= 20\n    }\n    else if (this.direction === 'right'){\n      this.x += 20\n    }\n\n    this.snakeBody[0] = [this.x, this.y]\n\n    if (this.x === appleX && this.y === appleY){\n      this.debugger.push(tail)\n    }}\n  }\n\n  add(){\n    if (this.debugger.length === 1){\n      this.snakeBody[this.snakeLength()] = this.debugger.pop()\n    }\n  }\n\n  snakeLength() {\n    return Object.keys(this.snakeBody).length\n  }\n\n  collided() {\n\n      for (let i = 1; i < this.snakeLength(); i++){\n          const temp_x = this.snakeBody[i][0]\n          const temp_y = this.snakeBody[i][1]\n          if (this.x === temp_x && this.y === temp_y){\n            return true\n          }\n      }\n      if (this.y > 300 || this.y < 0 || this.x < 0 || this.x > 460){\n        return true\n\n      }\n      return false\n  }\n\n  pauseSnake(){\n    this.pause = true\n  }\n\n  getSnakeCoords(){\n    return Object.values(this.snakeBody)\n  }\n\n  resetSnake() {\n      this.x = 100\n      this.y = 100\n      this.snakeBody = {0:[this.x , this.y], 1:[this.x - 20, this.y], 2:[this.x - 40, this.y], 3:[this.x - 60, this.y]}\n  }\n}\n\nclass Apple {\n\n  constructor(snake) {\n    const randCoords = genRandomXY(snake.getSnakeCoords())\n    this.x = randCoords[0]\n    this.y = randCoords[1]\n  }\n\n  collision(snakeX, snakeY, setScore, localScore) {\n    if (snakeX === this.x && snakeY === this.y){\n      localScore += 1\n      setScore(localScore)\n      return true\n    }\n    else{\n      return false\n    }\n  }\n\n  redraw(snakeX, snakeY, setScore, localScore, snake){\n    if (this.collision(snakeX, snakeY, setScore, localScore)){\n      const randCoords = genRandomXY(snake.getSnakeCoords())\n      this.x = randCoords[0]\n      this.y = randCoords[1]\n    }\n  }\n\n  getX(){\n    return this.x\n  }\n\n  getY(){\n    return this.y\n  }\n}\n\n\nconst genRandomXY = (snakeBody) => {\n\n  const y = Math.floor(Math.random() * 15) * 20\n  const x = Math.floor(Math.random() * 23) * 20\n  let recurse = false\n  snakeBody.every(element => {\n    console.log(element)\n    const temp_x = element[0]\n    const temp_y = element[1]\n    if (x === temp_x && y === temp_y){\n      recurse = true\n      return false\n    }\n  });\n  return recurse? genRandomXY(snakeBody): [x, y]\n\n}\n\n\n\nconst Game = React.memo(({setRestart, x, setX, setScore}) => {\n\n\n  let localScore = 0\n  const snake = new Snake(100, 100, 'right')\n  const apple = new Apple(snake)\n  const canvasRef = useRef(null)\n\n  const controller = (event) => {\n\n    if (event.code === \"ArrowRight\"){\n      snake.changeDirection(\"right\")\n    }\n    else if (event.code === \"ArrowLeft\"){\n      snake.changeDirection(\"left\")\n    }\n    else if (event.code === \"ArrowUp\" ){\n      snake.changeDirection(\"up\")\n    }\n    else if (event.code === \"ArrowDown\"){\n      snake.changeDirection(\"down\")\n    }\n    else if (event.keyCode === 32){\n      snake.pauseSnake()\n    }\n    else if (event.keyCode === 13){\n      snake.go()\n    }\n  }\n\n  useEffect(() => {\n\n\n      const canvas = canvasRef.current\n      const ctx = canvas.getContext(\"2d\");\n      const canvasWidth = canvas.width/2\n      const canvasHeight = canvas.height/2\n\n      const gameLogic = (ctx, canvas) => {\n\n        const snakeCollided = snake.collided()\n\n        if (!snakeCollided){\n          drawSnake(ctx, canvas)\n          drawApple(ctx, canvas)\n          snake.updatePostion(apple.getX(), apple.getY())\n          snake.add()\n          apple.redraw(snake.x, snake.y, setScore, localScore, snake)\n          setStateX(snake.x)\n          setStateY(snake.y)\n\n        }\n        else if (snakeCollided){\n            setRestart(true)\n        }\n      }\n\n      let gameState = setInterval(() => {gameLogic(ctx, canvas)}, 150)\n\n      if (x){\n        snake.resetSnake()\n        setX(false)\n        localScore = 0\n        setScore(localScore)\n      }\n      window.addEventListener('keydown', controller, canvasWidth, canvasHeight);\n      return () => {\n      clearInterval(gameState)\n      window.removeEventListener('keydown', controller, canvasWidth, canvasHeight);\n  }\n},[x])\n\n\n\n  function drawSnake(ctx, canvas) {\n\n    const squareSide = 20\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.beginPath()\n    ctx.rect(snake.x, snake.y, squareSide, squareSide);\n    if (snake.snakeLength() > 0){\n\n      for (let i = 0; i <= snake.snakeLength() - 1; i++){\n\n          ctx.rect(snake.snakeBody[i][0], snake.snakeBody[i][1], squareSide, squareSide);\n      }\n    }\n    ctx.fillStyle = \"#388E3C\";\n    ctx.fill();\n    ctx.closePath();\n}\n\n  function drawApple(ctx, canvas, x, y) {\n\n      ctx.beginPath()\n      ctx.arc(apple.getX() + appleRadius, apple.getY() + appleRadius, appleRadius, 0, Math.PI*2);\n      ctx.fillStyle = \"#D32F2F\";\n      ctx.fill();\n      ctx.closePath();\n    }\n\n\n\n  return(\n    <div>\n        <h1 style ={{fontFamily: \"'Press Start 2P', cursive\", textAlign: \"center\"}}> Snake</h1>\n        <canvas  style={{ background: \"#262626\", display: \"block\", margin: \"0 auto\" }} id=\"myCanvas\" width=\"480\" height=\"320\" ref={canvasRef}></canvas>\n    </div>\n  )\n})\n\nfunction App() {\n\n  const [restart, setRestart] = useState(false)\n  const [x, setX] = useState(false)\n  const [score, updateScore] = useState(0)\n\n\n  return (\n    <div>\n        <Game setScore = {updateScore} setX ={setX} x={x} setRestart ={setRestart} />\n\n\n        {restart &&   <h4 onClick={() => {setRestart(false); setX(true)}} style ={{fontFamily: \"'Press Start 2P', cursive\", textAlign: \"center\", cursor:\"grab\"}}> New Game</h4>}\n        <h4 style ={{fontFamily: \"'Press Start 2P', cursive\", textAlign: \"center\", cursor:\"grab\"}}>Score: {score}</h4>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}